generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("LOCAL_DATABASE_URL")
}

model PanelUser {
  id         String        @id
  clerk_id   String        @unique
  email      String        @unique
  fullname   String
  role       PanelUserType
  created_at DateTime      @default(now())
}

model Notification {
  id          String   @id
  title       String
  description String
  author      String?
  is_read     Boolean  @default(false)
  created_at  DateTime @default(now())
}

model Customer {
  id               String       @id
  email            String       @unique
  phone            String       @unique
  name             String
  profile_picture  String?
  role             CustomerType
  is_approved      Boolean      @default(false)
  gstin            String?
  business         String?
  shipping_address Json?
  billing_address  Json?
  created_at       DateTime     @default(now())

  dealer_id   String?
  dealer_user Customer?  @relation("DealerUser", fields: [dealer_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
  dealer      Customer[] @relation("DealerUser")
}

model OTP {
  id         String   @id @default(nanoid())
  email      String   @unique
  code       String
  expires_at DateTime
  created_at DateTime @default(now())
}

enum CustomerType {
  DEALER
  TECHNICIAN
  BACKOFFICE
}

enum PanelUserType {
  ADMIN
  EMPLOYEE
}
